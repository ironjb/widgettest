<!DOCTYPE html>
<html class="html-footer-sticky">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Rate Widget</title>

	<link rel="stylesheet" type="text/css" href="/Content/font-awesome.min.css" />
	<link rel="stylesheet" href="/Content/simple-line-icons.css" />

	<link rel="stylesheet" href="/Content/lt-bootstrap.css" />
	<link rel="stylesheet" type="text/css" href="/Content/lib/angular-bootstrap-colorpicker/css/colorpicker.min.css" />
	<link rel="stylesheet" href="/Content/lt-site.css" />

	<link rel="stylesheet" type="text/css" href="/Areas/Widgets/Content/site.css" />

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body>
	<div class="page-head page-head-inverse">
		<div class="page-head-top">
			<div class="container">
				<div class="page-logo"><a href="/"><img src="/Content/images/logo-loantek.com-500px.png" alt="LoanTek" class="logo-lt" /></a></div>
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbarMenu" aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<i class="icon-menu"></i>
				</button>
				<div class="top-menu pull-right">
					<ul class="nav navbar-nav pull-right">
						<li class="dropdown dropdown-bubble dropdown-fade">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Welcome Joe <span class="caret"></span></a>
							<ul class="dropdown-menu dropdown-menu-inverse si-pad dropdown-menu-right dropdown-menu-fadeX">
								<li><a href="#"><i class="icon-user"></i> Account</a></li>
								<li><a href="#"><i class="icon-blank"></i> Support</a></li>
								<li><a href="#"><i class="icon-reload"></i> Reload Settings</a></li>
								<li><a href="#"><i class="icon-logout"></i> Sign Off</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="page-head-menu">
			<div id="navbarMenu" class="navbar-collapse collapse">
				<nav class="navbar navbar-inverse">
					<div class="container">
						<ul class="nav navbar-nav dropdown-hover-to-open si-pad dropdown-sm-fade">
							<li><a href="#"><i class="icon-home"></i> Home</a></li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Websites <span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li><a href="http://clients.loantek.com"><i class="icon-link"></i> clients.loantek.com</a></li>
									<li><a href="http://www.loantek.com"><i class="icon-link"></i> www.loantek.com</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Quoting <span class="caret"></span></a>
								<ul class="dropdown-menu">
									<li><a href="#">Preferences</a></li>
									<li><a href="#">Reporting</a></li>
									<li><a href="#">Widgets</a></li>
									<li><a href="#">API(s)</a></li>
								</ul>
							</li>
						</ul>
						<p class="navbar-text navbar-right">text</p>
						<ul class="nav navbar-nav navbar-right">
							<li><a href="mortgagerate-test.html">Demo</a></li>
							<li><a href="datatable-test.html">DT Test</a></li>
						</ul>
					</div>
				</nav>
			</div>
		</div>
	</div>

	<div class="container">
		<!-- START WIDGET INDEX CONTENT -->


<div data-ng-app="WidgetBuilderApp" data-ng-controller="WidgetBuilderController">
	<a name="widgetTop"></a>
	<h1 class="title">@Model.WidgetType.Description() Builder</h1>
	<div class="row">
		<div class="col-sm-4">
			<form action="" class="form-horizontal">
				<div class="row">
					<div class="col-sm-12">
						@if (Request.QueryString["viewtemplate"] == "true") {
							<textarea class="form-control resize-vertical code-mono code-sm" rows="8">{{currentForm}}</textarea>
						}
						<!-- @*<pre style="white-space:pre-wrap;">{{currentFormStr}}</pre>
						<textarea class="form-control resize-vertical" rows="8">{{currentForm}}</textarea>*@ -->
						<div class="panel panel-default">
							<div class="panel-heading" data-ng-click="isCollapsedSaved = !isCollapsedSaved">
								<h3 class="panel-title">Saved Widgets<span class="glyphicon pull-right" data-ng-class="isCollapsedSaved &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
							</div>
							<div data-uib-collapse="isCollapsedSaved">
								<div class="panel-body">
									<div class="form-group form-group-sm ng-hide" data-ng-show="isExistingModel">
										<label for="WidgetName" class="control-label col-sm-12 text-left">Widget Name</label>
										<div class="col-sm-12"><input type="text" class="form-control" id="WidgetName" name="WidgetName" data-ng-model="passedModelForm.Name" /></div>
									</div>
									<div class="form-group form-group-sm">
										<div class="col-sm-12">
											<button class="btn btn-xs btn-primary ng-hide" data-ng-click="SaveWidget();" type="button" data-ng-show="isExistingModel">save</button>
											<button class="btn btn-xs btn-success" data-ng-click="SaveWidget(true);" type="button">save as new</button>
											<button class="btn btn-xs btn-default ng-hide" data-ng-click="RevertWidget();" type="button" data-ng-show="isExistingModel">revert</button>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-heading" data-ng-click="isCollapsedTemplates = !isCollapsedTemplates">
								<h3 class="panel-title">Use a Prebuilt Form<span class="glyphicon pull-right" data-ng-class="isCollapsedTemplates &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
							</div>
							<div data-uib-collapse="isCollapsedTemplates">
								<div class="panel-body">
									<div class="form-group form-group-sm">
										<div class="col-sm-12">
											<select name="ltprebuiltTemplate" id="ltprebuiltTemplate" class="form-control" data-ng-change="UsePrebuiltForm();" data-ng-model="selectedForm" data-ng-options="pform.name for pform in widgetObject.prebuiltForms"></select>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="panel panel-default">
							<div class="panel-heading" data-ng-click="isCollapsedAvailableFields = !isCollapsedAvailableFields">
								<h3 class="panel-title">Available Fields<span class="glyphicon pull-right" data-ng-class="isCollapsedAvailableFields &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
							</div>
							<div data-uib-collapse="isCollapsedAvailableFields">
								<div class="panel-body">
									<div class="list-group lt-no-bottom-margin">
										<div class="list-group-item" data-ng-repeat="aField in allFieldsOptionsArray | filter: FilterAvailableFields | orderBy: ['allowMultiples']">
											<div class="pull-right">
												<span class="small text-danger" data-ng-show="!!aField.isLTRequired &amp;&amp; !aField.isIncluded">Required! &nbsp; </span>
												<span class="small" data-ng-show="!aField.allowMultiples &amp;&amp; !!aField.isIncluded">Can only add once</span>
												<a class="btn btn-default btn-xs btn-tool form-channel" data-jqyoui-draggable="{onStart:'onDragStart({field:\'{{aField.id}}\'})'}" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" data-drag="true" data-ng-show="(showAddBtns = aField.allowMultiples || !aField.isIncluded) &amp;&amp; aField.id !== 'customhidden'"><span class="glyphicon glyphicon-move"></span></a>
												<button class="btn btn-default btn-xs" type="button" data-ng-click="addField(aField.id, 'form');" data-ng-show="showAddBtns"><span class="glyphicon glyphicon-plus"></span></button>
											</div>
											<span data-ng-bind="aField.name"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="panel panel-default" data-ng-show="allResultFieldsOptionsArray">
							<div class="panel-heading" data-ng-click="isCollapsedAvailResultFields = !isCollapsedAvailResultFields">
								<h3 class="panel-title">Result Fields<span class="glyphicon pull-right" data-ng-class="isCollapsedAvailResultFields &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
							</div>
							<div data-uib-collapse="isCollapsedAvailResultFields">
								<div class="panel-body">
									<div class="list-group lt-no-bottom-margin">
										<div class="list-group-item" data-ng-repeat="aResult in allResultFieldsOptionsArray | filter: FilterAvailableFields | orderBy: ['allowMultiples']">
											<div class="pull-right">
												<span class="small text-danger" data-ng-show="!!aResult.isLTRequired &amp;&amp; !aResult.isIncluded">Required! &nbsp; </span>
												<span class="small" data-ng-show="!aResult.allowMultiples &amp;&amp; !!aResult.isIncluded">Can only add once</span>
												<a class="btn btn-default btn-xs btn-tool result-channel" data-jqyoui-draggable="{onStart:'onDragStart({field:\'{{aResult.id}}\'})'}" data-jqyoui-options="{revert: 'invalid', helper: 'clone'}" data-drag="true" data-ng-show="showAddBtns = aResult.allowMultiples || !aResult.isIncluded"><span class="glyphicon glyphicon-move"></span></a>
												<button class="btn btn-default btn-xs" type="button" data-ng-click="addField(aResult.id, 'result');" data-ng-show="showAddBtns"><span class="glyphicon glyphicon-plus"></span></button>
											</div>
											<span data-ng-bind="aResult.name"></span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
		<div class="col-sm-8">
			<div class="panel panel-default">
				<div class="panel-heading" data-ng-click="isCollapsedScriptCopy = !isCollapsedScriptCopy">
					<h3 class="panel-title">@Model.WidgetType.Description() Script<span class="glyphicon pull-right" data-ng-class="isCollapsedScriptCopy &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
				</div>
				<div data-uib-collapse="isCollapsedScriptCopy">
					<div class="panel-body">
						<form action="" class="form-horizontal">
							<div class="form-group">
								<div class="col-sm-12">
									<textarea data-ng-model="widgetScript" data-ng-class="scriptChangedClass" class="form-control input-sm code-mono code-sm code-change resize-vertical" rows="4" readonly="readonly"></textarea>
								</div>
							</div>
						</form>
						<!-- @using (Html.BeginForm("Demo", "Builder", FormMethod.Post, new { @target = "_blank" })) {
							@Html.Hidden("script", "{{widgetScriptParse}}")
							<button class="btn btn-default btn-sm" type="submit">Demo</button>
						} -->
					</div>
				</div>
			</div>
			<div class="panel panel-default ng-hide" data-ng-show="filteredFields.length > 0">
				<div class="panel-heading" data-ng-click="isCollapsedHidden = !isCollapsedHidden">
					<h3 class="panel-title">Hidden Fields <span class="glyphicon pull-right" data-ng-class="isCollapsedHidden &amp;&amp; 'glyphicon-chevron-right' || 'glyphicon-chevron-down'"></span></h3>
				</div>
				<div data-uib-collapse="isCollapsedHidden">
					<div class="panel-body">
						<form class="form-horizontal">
							<div class="list-group lt-no-bottom-margin">
								<div class="list-group-item" data-ng-repeat="hField in filteredFields = (currentForm.buildObject.fields | filter: FilterHiddenFormFields)" data-ng-init="fieldExt = FieldExtended(hField, 'buildObject', fieldHelperType);">
									<div class="row">
										<div class="col-sm-3">
											<div class="form-control-static input-sm">
												<span data-ng-bind="fieldExt.fieldOptions.name"></span>
											</div>
										</div>
										<div class="col-sm-3"><input type="text" class="form-control input-sm" data-ng-model="hField.attrs[fieldExt.additionalInfoIndex].value" data-ng-model-options="ngModelOptions" data-ng-change="UpdateWidget();" placeholder="Key name" /></div>
										<div class="col-sm-3"><input type="text" class="form-control input-sm" data-ng-model="hField.value" data-ng-model-options="ngModelOptions" data-ng-change="UpdateWidget();" placeholder="Value of hidden field" /></div>
										<div class="col-sm-3 text-right"><button class="btn btn-danger btn-sm" type="button" data-ng-click="RemoveField(fieldExt.index, 'buildObject');"><span class="glyphicon glyphicon-trash"></span></button></div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12">
					<div data-lt-compile-code="widgetScriptDisplay"></div>
				</div>
			</div>
		</div>
	</div>
</div>


		<!-- END WIDGET INDEX CONTENT -->
	</div>

	<div class="footer footer-inverse footer-sticky">
		<div class="container">
			<p class="text-center">&copy; 2016 - LoanTek | 1020 West Main Street, Suite 270, Boise, Idaho 83702</p>
			<p class="text-center">Support: <a href="mailto:support@loantek.com">support@loantek.com</a> | Call Us: <a href="tel:1-888-562-6835">1-888-562-6835</a></p>
		</div>
	</div>




	<script type="text/javascript" src="/Scripts/lib/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/jquery/jquery-ui.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/jquery/jquery.placeholder.min.js"></script>

	<script type="text/javascript" src="/Scripts/lib/bootstrap/bootstrap.min.js"></script>

	<script type="text/javascript" src="/Scripts/lib/angular/angular.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/angular/angular-animate.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/angular/angular-sanitize.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/angular/ui-bootstrap-tpls.min.js"></script>
	<script type="text/javascript" src="/Scripts/common/ng/services.js"></script>
	<script type="text/javascript" src="/Scripts/common/ng/directives.js"></script>

	<script type="text/javascript" src="/Scripts/lib/angular/angular-dragdrop.min.js"></script>
	<script type="text/javascript" src="/Scripts/lib/angular-bootstrap-colorpicker/bootstrap-colorpicker-module.min.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/post-object/contact.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/post-object/deposit.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/common/widget-helpers.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/widget/widget-builder-helpers.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/widget/widget-builder-templates.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/widget/widget-builder-services.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/widget/widget-builder-directives.js"></script>
	<script type="text/javascript" src="/Areas/Widgets/Scripts/widget/widget-builder.js"></script>

	<script type="text/javascript">
		var qwTest = {
	"name": "Default Rate Widget",
	"buildObject": {
		"panelTitle": "Rates",
		"fields": [{
			"field": "label",
			"value": "Start Here",
			"cols": 6
		}, {
			"field": "depositamount",
			"cols": 6
		}, {
			"field": "submit"
		}],
		"widgetType": "deposit"
	}
};
		var widgetModelData = {scriptsDomain: 'http://localhost:58477', modelWidget: {"WidgetTypeType":"MortgageRateWidget","OwnerId":861,"PostingUrl":"https://clients-pricing-api.LoanTek.com/Mortgage/v1.0/MortgageLoan/Mjh4UnJxNmFDeXFlc2pXRlArNU52NzlZUDNLSmg3ZmhBQT090/FullMortgageRequest","CreatedByUserName":"Adam Stein","LastUpdatedByUserName":"","ClientId":399,"UserId":861,"WidgetType":"MortgageRateWidget","ScriptText":"ADD SCRIPT HERE"}, widgetTemplates: [{"WidgetTypeType":11,"OwnerId":0,"PostingUrl":"https://clients-pricing-api.LoanTek.com/Mortgage/v1.0/MortgageLoan/Wm94YXZUSmdTZ0VpRXc1cldJRC9hZ0E90/FullMortgageRequest","CreatedByUserName":"","LastUpdatedByUserName":"","Id":0,"ClientId":0,"UserId":0,"WidgetType":"MortgageRateWidget","Name":"template1.json","ScriptText":"{\"name\": \"Default Mortgage Rate Widget\",\"buildObject\": {\"panelTitle\": \"Today\u0027s Rate\",\"fields\": [{ \"field\": \"loantype\" },{\"field\": \"ratetable\",\"dataTableOptions\": {\"isBordered\": true,\"isCondensed\": true,\"isStriped\": true,\"isHover\": true},\"backgroundColor\": \"#def\",\"borderColor\": \"#09f\",\"color\": \"#026\"},{\"field\": \"paragraph\",\"value\": \"* Payment will vary depending on loan amount and down payment\",\"color\": \"#999\",\"fontSize\": 10,\"align\": \"center\",\"marginTopBottom\": 0},{\"field\": \"paragraph\",\"value\": \"\u003ca href=\\\"http://loantek.com\\\" target=\\\"_blank\\\"\u003eContact\u003c/a\u003e LoanTek @ 1-888-562-6835 to lock-in these great rates right now!\",\"color\": \"#999\",\"fontSize\": 12,\"align\": \"center\",\"marginTopBottom\": 0}]}}","LastModifiedDate":"\/Date(1476134341990)\/","LastModifiedByUserID":null,"Active":true}] };
		var wbuilder = new LoanTekWidget.WidgetBuilder(jQuery, widgetModelData);
	</script>
</body>
</html>